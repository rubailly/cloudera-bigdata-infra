✅ Developer Deployment Guide (Precise Version)
🎯 Objective
This repository automates the deployment of a secure, multi-tenant Cloudera Big Data platform for three telecom clients:

MTN Rwanda

MTN Ghana

Airtel Uganda

The cluster includes:

Cloudera Manager

HDFS, YARN, Hive, Spark

Multi-tenant HDFS directory structure

Isolated YARN queues per client

Secure access policies using Apache Ranger

🖥️ Server Infrastructure
You need three Linux servers (Ubuntu 20.04 recommended) with the following roles:

Server	Role	Default IP (Configurable)
1	Cloudera Manager + Master	157.245.39.216
2	Worker Node 1	38.242.250.17
3	Worker Node 2	45.90.120.29

To use your own servers, edit the IP addresses in config/server-config.sh
All servers must be reachable by SSH and have at least:

8 vCPUs

16 GB RAM

100+ GB SSD

🗂️ Project Structure
pgsql
Copy
Edit
cloudera-bigdata-infra/
│
├── inventory/
│   ├── hosts.ini                 ← Server IPs grouped by role
│   └── group_vars/
│       └── all.yml              ← Shared config: cluster name, SSH key path, credentials
│
├── playbooks/
│   ├── setup-prereqs.yml        ← Java, SSH, hostname, hosts
│   ├── install-cloudera.yml     ← Install Cloudera Manager + agents
│   ├── deploy-services.yml      ← Install HDFS, YARN, Hive, Spark
│   ├── setup-multitenancy.yml   ← Create tenants, queues, directories, Ranger policies
│   └── secure-cluster.yml       ← Optional: enable Kerberos + TLS
│
├── config/
│   ├── cluster-definition.json  ← API-based definition of services to deploy
│   ├── yarn-queues.json         ← MTN & Airtel queue structure
│   └── ranger-policies.json     ← Fine-grained access control
│
├── scripts/
│   ├── generate-ssh-keys.sh     ← SSH key automation
│   └── distribute-hosts.sh      ← Hostname + /etc/hosts setup
│
├── .env.sample                  ← Template for credentials/secrets
└── README.md                    ← This guide
🔐 Credentials & Configs
Edit .env.sample, then rename to .env:

bash
Copy
Edit
CLUSTER_NAME=TelecomCluster
CM_ADMIN_USER=admin
CM_ADMIN_PASSWORD=admin123
SSH_PRIVATE_KEY=~/.ssh/cloudera_id_rsa
SSH_USER=ubuntu
Configure your server IPs:

bash
Copy
Edit
# Edit the server-config.sh file
vim config/server-config.sh

# Generate the inventory file
bash scripts/generate-inventory.sh
⚙️ Step-by-Step Deployment
1. 🔧 Configure Servers and Prepare SSH
From your local machine or jump host:

bash
Copy
Edit
# Edit server configuration if needed
vim config/server-config.sh

# Generate inventory file
bash scripts/generate-inventory.sh

# Set up hostnames and /etc/hosts
bash scripts/hosts-setup.sh
2. 🛠️ Run Prerequisites Setup
bash
Copy
Edit
ansible-playbook -i inventory/hosts.ini playbooks/setup-prereqs.yml
Installs Java

Configures hostnames

Syncs /etc/hosts across nodes

Disables swap

3. 📦 Install Cloudera Manager + Agents
bash
Copy
Edit
ansible-playbook -i inventory/hosts.ini playbooks/install-cloudera.yml
Installs Cloudera Manager on your master node

Installs agents on all nodes

Access the UI at:
http://<master-ip>:7180
Login with admin / Secure123!

4. 🧠 Deploy Hadoop Ecosystem
bash
Copy
Edit
ansible-playbook -i inventory/hosts.ini playbooks/deploy-services.yml
Deploys:

HDFS (with 3x replication)

YARN (ResourceManager on 10.0.0.10)

Hive + Metastore

Spark

Impala (optional)

5. 🏢 Configure Multi-Tenancy
bash
Copy
Edit
ansible-playbook -i inventory/hosts.ini playbooks/setup-multitenancy.yml
Creates:

HDFS directories:

bash
Copy
Edit
/telecoms/mtn-rwanda/
/telecoms/mtn-ghana/
/telecoms/airtel-uganda/
YARN Queues:

json
Copy
Edit
{
  "root": {
    "children": {
      "mtn": {
        "children": {
          "rwanda": { "capacity": "25" },
          "ghana": { "capacity": "25" }
        }
      },
      "airtel": {
        "children": {
          "uganda": { "capacity": "50" }
        }
      }
    }
  }
}
Ranger policies to restrict users to their folders/queues

✅ End Result
Once all playbooks complete, you’ll have:

Cloudera Manager dashboard (http://10.0.0.10:7180)

HDFS and Hive configured

Spark ready for jobs

MTN and Airtel each have:

Their own queue for YARN jobs

Private HDFS directory

Restricted access using Apache Ranger

You can now run:

Hive queries for CDRs

Spark analytics per tenant

Monitoring through Cloudera Manager

🧪 (Coming Soon) Sample Workflows
In /samples/, we’ll include:

CDR data for 3 telecoms

Hive DDL scripts to ingest

Spark scripts to compute total calls per tower

🛠 Developer Tasks Checklist
If you’re the assigned developer:

 Clone the repo

 Fill in .env and hosts.ini

 Run setup-prereqs.yml

 Run install-cloudera.yml

 Run deploy-services.yml

 Run setup-multitenancy.yml

 Verify via Cloudera Manager dashboard

 Document anything you change for reuse
